<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UnitySphere | Admin Dashboard</title>

  <!-- Shared + dashboard styles -->
  <link rel="stylesheet" href="base.css">
  <link rel="stylesheet" href="dashboard.css">
</head>

<body class="dashboard-page">
  <div class="app-shell" id="dashboard">

    <!-- ======================================
         SIDEBAR
    ======================================= -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-icon">US</div>
        <div>
          <strong>UnitySphere</strong>
          <span>Admin</span>
        </div>
      </div>

      <nav class="sidebar-nav">
<button type="button" class="nav-link active" data-section="overview">üè† <span>Dashboard</span></button>
<button type="button" class="nav-link" data-section="centers">üè¢ <span>Centers</span></button>
<button type="button" class="nav-link" data-section="specialists">üßë‚Äç‚öïÔ∏è <span>Specialists</span></button>
<button type="button" class="nav-link" data-section="children">üë¶ <span>Children</span></button>
<button type="button" class="nav-link" data-section="modules">üß© <span>VR Modules</span></button>
<button type="button" class="nav-link" data-section="assessments">üìä <span>Assessments</span></button>

      </nav>

      <div class="sidebar-footer">
        <div class="current-user">
          <div class="avatar avatar-static" id="sidebar-avatar"></div>
          <div>
            <strong id="sidebar-name">Admin</strong>
            <span id="sidebar-email" class="hint">‚Äî</span>
          </div>
        </div>
        <button type="button" class="ghost" id="logout">Log out</button>
      </div>
    </aside>

    <!-- ======================================
         MAIN CONTENT AREA
    ======================================= -->
    <div class="app-main">

      <!-- ======================================
           HEADER
      ======================================= -->
      <header class="app-header">
        <div>
          <p class="hint" id="greeting">Welcome</p>
          <h1 id="section-title">Admin Dashboard</h1>
        </div>

        <div class="header-actions">
          <div class="user-chip">
            <div class="avatar avatar-static" id="header-avatar"></div>
            <div>
              <strong id="user-name">Admin</strong>
              <span id="user-role" class="hint">Main admin</span>
            </div>
          </div>
        </div>
      </header>

      <!-- ======================================
           MAIN SECTIONS
      ======================================= -->
      <main>

        <!-- ======================================
             OVERVIEW SECTION
        ======================================= -->
        <section id="section-overview" class="section active">

          <div class="overview-grid" id="network-overview">

            <!-- ROW 1 ‚Äî CHARTS -->
            <div class="card chart-card" style="grid-column: span 4;">
              <div class="card-header">
                <div>
                  <h2>VR Minutes per Month</h2>
                  <p class="hint">This week ‚Ä¢ Last week</p>
                </div>
              </div>

              <div class="chart multi-line">
                <div class="chart-lines">
                  <span class="line line-one"></span>
                  <span class="line line-two"></span>
                </div>
                <div class="chart-axis">
                  <span>Jan</span>
                  <span>Feb</span>
                  <span>Mar</span>
                  <span>Apr</span>
                  <span>May</span>
                  <span>Jun</span>
                </div>
              </div>
            </div>

            <div class="card donut-card" style="display:none;">
              <div class="card-header">
                <div>
                  <h2>Session by Device</h2>
                  <p class="hint">Centers ‚Ä¢ Modules ‚Ä¢ Specialists ‚Ä¢ Other</p>
                </div>
              </div>

              <div class="donut-wrapper">
                <div class="donut"></div>
                <ul class="chart-legend">
                  <li><span class="legend-color legend-one"></span> Centers: 38.6%</li>
                  <li><span class="legend-color legend-two"></span> Modules: 22.5%</li>
                  <li><span class="legend-color legend-three"></span> Specialist: 30.8%</li>
                  <li><span class="legend-color legend-four"></span> Other: 8.1%</li>
                </ul>
              </div>
            </div>

            <div class="card learning-progress" style="display:none;">
              <div class="card-header">
                <div>
                  <h2>Learning Progress</h2>
                  <p class="hint">Videos ‚Ä¢ Tasks</p>
                </div>
              </div>

              <div class="progress-circle" style="--progress-value: 85;">
                <div class="progress-center">
                  <strong>85%</strong>
                  <span class="hint">Overall</span>
                </div>
              </div>

              <div class="card-footer">
                <span class="pill">Videos 60%</span>
                <span class="pill">Tasks 85%</span>
              </div>
            </div>

            <!-- ROW 2 ‚Äì STAT CARDS -->
            <div class="stat-card">
              <header>
                <span>Centers</span>
              </header>
              <div class="stat-value" id="stat-centers">0</div>
              <div class="trend neutral">Total centers configured</div>
            </div>

            <div class="stat-card">
              <header>
                <span>Specialists</span>
              </header>
              <div class="stat-value" id="stat-specialists">0</div>
              <div class="trend neutral">Specialists (not yet wired)</div>
            </div>

            <div class="stat-card">
              <header>
                <span>VR Modules</span>
              </header>
              <div class="stat-value" id="stat-modules">0</div>
              <div class="trend neutral">Modules (UI only for now)</div>
            </div>

            <div class="stat-card">
              <header>
                <span>Assessments</span>
              </header>
              <div class="stat-value" id="stat-assessments">0</div>
              <div class="trend neutral">Assessments (UI only for now)</div>
            </div>

            <!-- ROW 3 ‚Äì PROGRESS + RECOMMENDATIONS -->
            <div class="card progress-list">
              <div class="card-header">
                <div>
                  <h2>Progress Rate by Center</h2>
                  <p class="hint">Static demo for now</p>
                </div>
              </div>

              <div class="progress-item">
                <strong>NeuroConnect Center</strong>
                <div class="progress-bar"><span style="width: 78%"></span></div>
                <span class="score">78%</span>
              </div>

              <div class="progress-item">
                <strong>Innovate Minds Center</strong>
                <div class="progress-bar"><span style="width: 64%"></span></div>
                <span class="score">64%</span>
              </div>

              <div class="progress-item">
                <strong>Cogniplay Center</strong>
                <div class="progress-bar"><span style="width: 91%"></span></div>
                <span class="score">91%</span>
              </div>
            </div>

            <div class="card recommendations" style="display:none;">
              <div class="card-header">
                <div>
                  <h2>AI Recommendations</h2>
                  <p class="hint">Static copy ‚Äì you can replace with real insights later.</p>
                </div>
              </div>

              <div class="recommendation">
                <div class="recommendation-icon">‚ö°</div>
                <div class="recommendation-body">
                  <strong>Increase sensory modules</strong>
                  <p class="hint">Add 3 new sessions to Innovate Minds to match demand.</p>
                  <ul class="recommendation-list">
                    <li>Prioritize sensory integration content for the Innovate Minds Center.</li>
                    <li>Pair new sessions with specialists focused on OT and PT.</li>
                    <li>Track progress through the assessment log after launch.</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ======================================
             CENTERS SECTION
        ======================================= -->
        <section id="section-centers" class="section">
          <div class="card full">

            <!-- Header -->
            <div class="card-header">
              <div>
                <h2>Centers</h2>
                <p class="hint">Smart distribution across regions (data comes from your ‚Äúcenters‚Äù sheet).</p>
              </div>

              <div class="card-actions">
                <!-- Export not wired to simple JS (can be wired later) -->
                <button id="btn-export-centers" class="primary ghost" disabled>Export</button>

                <button
                  id="btn-toggle-add-center"
                  class="primary with-icon"
                  data-label-open="Add New Center"
                  data-label-close="Close form"
                >
                  <span class="icon">Ôºã</span>
                  <span class="label">Add New Center</span>
                </button>
              </div>
            </div>

            <!-- Add Center Form -->
            <div id="add-center-panel" class="card collapsible">

              <div class="card-header">
                <div>
                  <h2>Register new center</h2>
                  <p class="hint">Provide credentials. The record will be created in the ‚Äúcenters‚Äù sheet.</p>
                </div>
              </div>

              <form id="form-center" class="grid-2-col" autocomplete="off">
                <div class="form-panel">

                  <!-- Name -->
                  <div class="input-group">
                    <label for="center-name">Center name</label>
                    <input id="center-name" required placeholder="Cogniplay City Center">
                  </div>

                  <!-- Location -->
                  <div class="input-group">
                    <label for="center-location">Location</label>
                    <input id="center-location" placeholder="Riyadh, Saudi Arabia">
                  </div>

                  <!-- (Optional) Image URL (not sent to Apps Script for now) -->
                  <div class="input-group">
                    <label for="center-image">Cover image URL (optional)</label>
                    <input id="center-image" placeholder="https://.../cover.jpg">
                  </div>

                  <!-- (Optional) Upload (not wired to backend, just UI) -->
                  <div class="input-group">
                    <label for="center-image-file">Or upload cover photo</label>
                    <input id="center-image-file" type="file" accept="image/*">
                  </div>

                  <!-- Description -->
                  <div class="input-group">
                    <label for="center-desc">Short description</label>
                    <input id="center-desc" placeholder="Immersive neurodevelopmental therapy">
                  </div>

                  <!-- Tags (purely cosmetic for now) -->
                  <div class="input-group">
                    <label for="center-tags">Capabilities (comma separated)</label>
                    <input id="center-tags" placeholder="Cognitive Rehab, Sensory, Balance">
                  </div>

                  <!-- Divider -->
                  <div class="form-divider">
                    <h3>Center login</h3>
                    <p class="hint">These credentials will be saved to the ‚Äúcenters‚Äù sheet and used for Center login.</p>
                  </div>

                  <!-- Login Fields -->
                  <div class="input-group">
                    <label for="center-username">Center username</label>
                    <input id="center-username" required placeholder="center-riyadh">
                  </div>

                  <div class="input-group">
                    <label for="center-password">Center password</label>
                    <input id="center-password" type="password" required placeholder="StrongPass!123">
                  </div>

                  <!-- Actions -->
                  <div class="form-actions">
                    <button type="button" class="ghost" id="btn-cancel-center">Cancel</button>
                    <button class="primary" type="submit">Save center</button>
                  </div>

                </div>
              </form>
            </div>

            <!-- Map (purely visual unless you wire it later) -->
            <div class="centers-map">
              <div class="map-wrapper">
                <div
                  id="centers-map-canvas"
                  class="map-canvas"
                  data-google-maps-key="YOUR_GOOGLE_MAPS_KEY"
                  data-default-lat="24.7136"
                  data-default-lng="46.6753"
                  data-default-zoom="4"
                ></div>
              </div>

              <div id="centers-map-status" class="map-status muted">
                Add a Google Maps API key and center coordinates to visualize the pins.
              </div>
            </div>

            <!-- Directory -->
            <div class="center-directory">
              <div class="directory-header">
                <div>
                  <h3>Center directory</h3>
                  <p class="hint">Each card highlights center credentials. Data comes from the ‚Äúcenters‚Äù sheet.</p>
                </div>
              </div>

              <div class="card-grid" id="centers-grid"></div>
            </div>

          </div>
        </section>

                <!-- ======================================
             SPECIALISTS SECTION
        ======================================= -->
        <section id="section-specialists" class="section">
          <div class="card full">

            <div class="card-header">
              <div>
                <h2>Specialists</h2>
                <p class="hint">
                  Network-wide specialists. Add them as freelance or link them under a center.
                </p>
              </div>
            </div>

            <div class="split-layout">

              <!-- Summary column -->
              <aside class="summary-column">

                <div class="insight-card">
                  <span class="insight-label">Total specialists</span>
                  <strong id="specialists-total">0</strong>
                  <span class="hint">Across all centers and freelance</span>
                </div>

                <div class="insight-card">
                  <span class="insight-label">Assigned</span>
                  <strong id="specialists-assigned">0</strong>
                  <span class="hint">Linked under centers</span>
                </div>

                <!-- Focus mix removed per request -->

              </aside>

              <!-- MAIN CONTENT COLUMN -->
              <div class="content-column">

                <!-- ADD SPECIALIST FORM -->
                <div class="form-panel">
                  <div>
                    <h3>Add Specialist</h3>
                    <p class="hint">
                      Add a specialist and link them under a center or mark them as freelance.
                    </p>
                  </div>

                  <form id="admin-add-specialist-form" class="grid-2-col" autocomplete="off">
                    <div class="input-group">
                      <label for="spec-name">Full name</label>
                      <input id="spec-name" required placeholder="Dr. Sarah Al-Fahad">
                    </div>

                    <div class="input-group">
                      <label for="spec-focus">Focus / Discipline</label>
                      <input id="spec-focus" placeholder="OT / PT / Rehab">
                    </div>

                    <div class="input-group">
                      <label for="spec-username">Username</label>
                      <input id="spec-username" required placeholder="sarah.ot">
                    </div>

                    <div class="input-group">
                      <label for="spec-password">Password</label>
                      <input id="spec-password" type="password" required placeholder="TempPass!123">
                    </div>

                    <div class="input-group">
                      <label for="spec-type">Type</label>
                      <select id="spec-type">
                        <option value="freelance">Freelance</option>
                        <option value="center">Under a center</option>
                      </select>
                    </div>

                    <div class="input-group" id="spec-center-wrapper" style="display:none;">
                      <label for="spec-center">Center</label>
                      <select id="spec-center">
                        <option value="">Select center</option>
                        <!-- Filled from ‚Äúcenters‚Äù sheet -->
                      </select>
                    </div>

                    <button type="submit" class="primary">Save specialist</button>
                  </form>
                </div>

                <!-- ROSTER -->
                <div class="card-subsection">

                  <div class="directory-header">
  <div>
    <h3>Specialist directory</h3>
    <p class="hint">
      Search, filter, sort and export specialists.
    </p>
  </div>

  <div class="grid-inline" style="max-width:540px;">
    <div class="input-group">
      <label for="spec-search">Search</label>
      <input
        id="spec-search"
        placeholder="Search by name, focus or center"
      >
    </div>

    <div class="input-group">
      <label for="spec-filter">Filter</label>
      <select id="spec-filter">
        <option value="all">All specialists</option>
        <option value="freelance">Freelance only</option>
        <option value="center">Center specialists</option>
      </select>
    </div>

    <div class="input-group">
      <label for="spec-sort">Sort</label>
      <select id="spec-sort">
        <option value="name-asc">Name A‚ÄìZ</option>
        <option value="center-asc">Center A‚ÄìZ</option>
      </select>
    </div>

    <div class="input-group">
      <label>&nbsp;</label>
      <button type="button" class="ghost" id="spec-export-btn">
        Export CSV
      </button>
    </div>
  </div>
</div>


                  <!-- JS will render two sections:
                       - Freelance specialists
                       - Center specialists grouped by center -->
                  <div id="specialists-list"></div>

                </div>
              </div>
            </div>

          </div>
        </section>



        <!-- ======================================
             VR MODULES SECTION (UI only)
        ======================================= -->
        <section id="section-modules" class="section">
          <div class="card full">
            <div class="card-header">
              <div>
                <h2>VR Modules</h2>
                <p class="hint">Visual shell only. Backend wiring can be added later.</p>
              </div>
            </div>
            <div class="empty-state">
              VR Modules will appear here once you decide how to store them in Google Sheets.
            </div>
          </div>
        </section>

                <!-- ======================================
             CHILDREN SECTION
        ======================================= -->
        <section id="section-children" class="section">
          <div class="card full">
            <div class="card-header">
              <div>
                <h2>Children</h2>
                <p class="hint">
                  View children linked with each center and specialist (including freelance).
                </p>
              </div>
            </div>

            <div class="split-layout">
              <!-- Stats -->
              <aside class="summary-column">
                <div class="insight-card">
                  <span class="insight-label">Total children</span>
                  <strong id="children-total">0</strong>
                  <span class="hint">Across all centers and freelance</span>
                </div>

                <div class="insight-card">
                  <span class="insight-label">With center</span>
                  <strong id="children-with-center">0</strong>
                  <span class="hint">Center-linked children</span>
                </div>

                <div class="insight-card">
                  <span class="insight-label">Without center</span>
                  <strong id="children-without-center">0</strong>
                  <span class="hint">Freelance / unassigned center</span>
                </div>
              </aside>

              <!-- Form + directory -->
              <div class="content-column">
                <!-- Add child -->
                <div class="form-panel">
                  <div>
                    <h3>Add child</h3>
                    <p class="hint">
                      Assign a child to a center and/or specialist. Both are optional.
                    </p>
                  </div>

                  <form id="admin-add-child-form" class="grid-2-col" autocomplete="off">
                    <div class="input-group">
                      <label for="child-name">Child name</label>
                      <input id="child-name" required placeholder="Ali Ahmed">
                    </div>

                    <div class="input-group">
                      <label for="child-age">Age</label>
                      <input id="child-age" type="number" min="1" max="25" placeholder="8">
                    </div>

                    <div class="input-group">
                      <label for="child-center">Center</label>
                      <select id="child-center">
                        <option value="">No center / freelance</option>
                        <!-- centers added by JS -->
                      </select>
                    </div>

                    <div class="input-group">
                      <label for="child-specialist">Specialist</label>
                      <select id="child-specialist">
                        <option value="">Unassigned specialist</option>
                        <!-- specialists added by JS -->
                      </select>
                    </div>

                    <div class="input-group" style="grid-column: 1 / -1;">
                      <label for="child-notes">Notes (diagnosis, goals, etc.)</label>
                      <textarea
                        id="child-notes"
                        rows="2"
                        placeholder="Sensory integration, attention focus, VR module goals..."
                      ></textarea>
                    </div>

                    <button type="submit" class="primary">Save child</button>
                  </form>
                </div>

                <!-- Directory -->
                <div class="card-subsection">
                  <div class="directory-header">
  <div>
    <h3>Children directory</h3>
    <p class="hint">Grouped by center and specialist. Sorting available.</p>
  </div>

  <div class="grid-inline" style="max-width:480px;">
    <div class="input-group">
      <label>Sort by</label>
      <select id="admin-children-sort">
        <option value="name-asc">Name A‚ÄìZ</option>
        <option value="name-desc">Name Z‚ÄìA</option>
        <option value="age-asc">Age: Youngest</option>
        <option value="age-desc">Age: Oldest</option>
        <option value="center-asc">Center A‚ÄìZ</option>
        <option value="specialist-asc">Specialist A‚ÄìZ</option>
      </select>
    </div>
  </div>
</div>


                  <div id="children-list"></div>
                </div>
              </div>
            </div>
          </div>
        </section>


        <!-- ======================================
             ASSESSMENTS SECTION (UI only)
        ======================================= -->
        <section id="section-assessments" class="section">
          <div class="card full">
            <div class="card-header">
              <div>
                <h2>Assessments</h2>
                <p class="hint">Visual structure only. Can be wired to Google Sheets later.</p>
              </div>
            </div>
            <div class="empty-state">
              When you‚Äôre ready, we can connect this section to an ‚Äúassessments‚Äù sheet and reuse the simple JS approach.
            </div>
          </div>
        </section>

      </main>
    </div>
  </div>
<!-- ======================================
     EDIT SPECIALIST MODAL
======================================= -->
<div class="modal-backdrop" id="spec-edit-modal">
  <div class="modal">
    <div class="modal-header">
      <div>
        <h3>Edit specialist</h3>
        <p class="modal-subtitle">
          Update specialist details and center assignment.
        </p>
      </div>
      <button type="button" class="icon-button" id="spec-edit-close">‚úï</button>
    </div>

    <form id="spec-edit-form" class="grid-2-col">
      <input type="hidden" id="spec-edit-row">

      <div class="input-group">
        <label for="spec-edit-name">Full name</label>
        <input id="spec-edit-name" required>
      </div>

      <div class="input-group">
        <label for="spec-edit-focus">Focus / Discipline</label>
        <input id="spec-edit-focus">
      </div>

      <div class="input-group">
        <label for="spec-edit-username">Username</label>
        <input id="spec-edit-username" required>
      </div>

      <div class="input-group">
        <label for="spec-edit-password">Password</label>
        <input id="spec-edit-password" type="password" required>
      </div>

      <div class="input-group">
        <label for="spec-edit-type">Type</label>
        <select id="spec-edit-type">
          <option value="freelance">Freelance</option>
          <option value="center">Under a center</option>
        </select>
      </div>

      <div class="input-group" id="spec-edit-center-wrapper" style="display:none;">
        <label for="spec-edit-center">Center</label>
        <select id="spec-edit-center"></select>
      </div>

      <div class="modal-actions">
        <button type="button" class="ghost" id="spec-edit-cancel">Cancel</button>
        <button type="submit" class="primary">Save changes</button>
      </div>
    </form>
  </div>
</div>

  <!-- ======================================
       SCRIPTS
  ======================================= -->
  <script src="dashboard-main.js"></script>
</body>
</html>
