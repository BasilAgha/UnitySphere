<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Dashboard - VR Therapy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Your CSS (already uploaded to your project / web host) -->
  <link rel="stylesheet" href="base.css" />
  <link rel="stylesheet" href="dashboard.css" />
</head>
<body class="dashboard-page">
  <div class="app-shell">
    <!-- ========= SIDEBAR ========= -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-icon">VR</div>
        <div>
          <strong id="brandName">VR Therapy Admin</strong>
          <span id="brandRole">System Control Panel</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-link active" data-section="dashboard">
          <span>Dashboard</span>
        </button>
        <button class="nav-link" data-section="centers">
          <span>Centers</span>
        </button>
        <button class="nav-link" data-section="specialists">
          <span>Specialists</span>
        </button>
        <button class="nav-link" data-section="children">
          <span>Children</span>
        </button>
        <button class="nav-link" data-section="modules">
          <span>VR Modules</span>
        </button>
        <button class="nav-link" data-section="questions">
          <span>Assessments</span>
        </button>
      </nav>

      <div class="sidebar-user">
        <div class="current-user">
          <div class="avatar avatar-static"></div>
          <div>
            <div id="currentUserName" class="user-name">Admin</div>
            <div class="hint user-role" id="currentUserRole">System Administrator</div>
          </div>
        </div>
        <button class="ghost block" id="logoutBtn">Log out</button>
      </div>
    </aside>

    <!-- ========= MAIN ========= -->
      <div class="app-main">
      <header class="app-header">
        <div>
          <h1>Welcome back, <span id="welcomeName">Admin</span></h1>
          <p class="hint">Everything you need to keep centers, specialists, and children supported.</p>
          <div class="hero-actions">
                <button class="primary" type="button" onclick="showSection('centers')">Open centers</button>
                <button class="ghost" type="button" onclick="showSection('modules')">Review modules</button>
              </div>
        </div>
        <div class="header-actions">
          <button class="ghost compact-toggle" type="button" data-compact-toggle aria-pressed="false">
            <span class="compact-label">Compact mode</span>
            <span class="compact-status" data-compact-status>Off</span>
          </button>
          <button class="ghost" id="accountSettingsBtn">Account</button>
          <button class="ghost" id="refreshAllBtn">Refresh data</button>
        </div>
      </header>

      <main>
        <!-- ===== DASHBOARD SECTION ===== -->
        <section id="section-dashboard" class="section active">
          
          <div class="overview-grid">
            <!-- Stat cards -->
            <div class="stat-card">
              <header>
                <span>Total Centers</span>
                <span class="chip subtle">Network</span>
              </header>
              <div class="stat-value" id="statCenters">0</div>
              <div class="trend" id="statCentersHint">Active centers running VR programs</div>
            </div>

            <div class="stat-card">
              <header>
                <span>Total Specialists</span>
                <span class="chip subtle">Therapists</span>
              </header>
              <div class="stat-value" id="statSpecialists">0</div>
              <div class="trend" id="statSpecialistsHint">Freelance + center-linked specialists</div>
            </div>

            <div class="stat-card">
              <header>
                <span>Total Children</span>
                <span class="chip subtle">Participants</span>
              </header>
              <div class="stat-value" id="statChildren">0</div>
              <div class="trend">Children across all centers</div>
            </div>

            <div class="stat-card">
              <header>
                <span>VR Modules</span>
                <span class="chip subtle">Content</span>
              </header>
              <div class="stat-value" id="statModules">0</div>
              <div class="trend">Available VR training modules</div>
            </div>

            <!-- Donut summary -->
            <div class="card donut-card">
              <div class="card-header">
                <h2>Quick Breakdown</h2>
              </div>
              <div class="donut-wrapper">
                <div class="donut" id="donutChart"></div>
                <ul class="chart-legend">
                  <li><span class="legend-color legend-one"></span> Centers: <span id="legendCenters">0</span></li>
                  <li><span class="legend-color legend-two"></span> Specialists: <span id="legendSpecialists">0</span></li>
                  <li><span class="legend-color legend-three"></span> Children: <span id="legendChildren">0</span></li>
                  <li><span class="legend-color legend-four"></span> Modules: <span id="legendModules">0</span></li>
                </ul>
              </div>
            </div>

            <!-- Recent insights -->
            <div class="card recommendations">
              <div class="card-header">
                <h2>Admin Insights</h2>
              </div>
              <div class="recommendation">
                <div class="recommendation-icon">Ops</div>
                <div class="recommendation-body">
                  <strong>Review center distribution</strong>
                  <span class="hint">
                    Check if each center has enough specialists for their children load.
                  </span>
                </div>
              </div>
              <div class="recommendation">
                <div class="recommendation-icon">VR</div>
                <div class="recommendation-body">
                  <strong>VR modules adoption</strong>
                  <span class="hint">
                    Make sure every center has the right modules assigned for their use-cases.
                  </span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ===== CENTERS SECTION ===== -->
        <section id="section-centers" class="section">
          <div class="card full">
            <div class="section-header">
              <div>
                <h2>Centers</h2>
                <p class="hint">Manage centers, their credentials, and basic stats.</p>
              </div>
              <div class="section-actions">
                <div class="view-switch" data-view-switch="centers">
                  <button type="button" class="active" data-view="card">Cards</button>
                  <button type="button" data-view="table">Table</button>
                </div>
                <button class="primary with-icon" id="btnAddCenter">
                  <span class="icon">+</span>
                  <span class="label">Add Center</span>
                </button>
              </div>
            </div>

            <div class="center-directory">
              <div class="directory-header">
                <h3>All Centers</h3>
                <span class="hint" id="centersCountHint">0 centers</span>
              </div>

              <div class="card-grid" id="centersGrid">
                <!-- Centers will be rendered here as .center-card -->
              </div>

              <div class="table-wrapper" id="centersTableWrap" style="display:none;"></div>

              <div class="empty-state" id="centersEmpty" style="display:none;">
                <div class="empty-title">No centers yet</div>
                <div>Centers are hubs for specialists and children records. Create one to get started.</div>
                <div class="empty-actions">
                  <button class="ghost small" id="centersEmptyAdd">Add Center</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ===== SPECIALISTS SECTION ===== -->
        <section id="section-specialists" class="section">
          <div class="card full">
            <div class="section-header">
              <div>
                <h2>Specialists</h2>
                <p class="hint">Manage freelance and center-linked specialists.</p>
              </div>
              <div class="section-actions">
                <div class="view-switch" data-view-switch="specialists">
                  <button type="button" class="active" data-view="card">Cards</button>
                  <button type="button" data-view="table">Table</button>
                </div>
                <button class="primary with-icon" id="btnAddSpecialist">
                  <span class="icon">+</span>
                  <span class="label">Add Specialist</span>
                </button>
              </div>
            </div>

            <div class="specialists-grid" id="specialistsGrid">
              <!-- Specialist cards here -->
            </div>

            <div class="table-wrapper" id="specialistsTableWrap" style="display:none;"></div>

            <div class="empty-state" id="specialistsEmpty" style="display:none;">
              <div class="empty-title">No specialists yet</div>
              <div>Specialists deliver therapy and manage children. Add your first therapist to populate sessions.</div>
              <div class="empty-actions">
                <button class="ghost small" id="specialistsEmptyAdd">Add Specialist</button>
              </div>
            </div>
          </div>
        </section>

        <!-- ===== CHILDREN SECTION ===== -->
        <section id="section-children" class="section">
          <div class="card full">
            <div class="section-header">
              <div>
                <h2>Children</h2>
                <p class="hint">View all children across centers and specialists.</p>
              </div>
              <div class="section-actions">
                <div class="view-switch" data-view-switch="children">
                  <button type="button" class="active" data-view="card">Cards</button>
                  <button type="button" data-view="table">Table</button>
                </div>
              </div>
            </div>

            <div class="modules-grid" id="childrenGrid">
              <!-- Children as cards, reusing modules-grid layout -->
            </div>

            <div class="table-wrapper" id="childrenTableWrap" style="display:none;"></div>

            <div class="empty-state" id="childrenEmpty" style="display:none;">
              <div class="empty-title">No children yet</div>
              <div>This space lists every child profile across centers. Add a center and specialist, then add children.</div>
              <div class="empty-actions">
                <button class="ghost small" id="childrenEmptyAddCenter">Add Center</button>
                <button class="ghost small" id="childrenEmptyAddSpecialist">Add Specialist</button>
              </div>
            </div>
          </div>
        </section>

        <!-- ===== MODULES SECTION ===== -->
        <section id="section-modules" class="section">
          <div class="card full">
            <div class="section-header">
              <div>
                <h2>VR Modules</h2>
                <p class="hint">Manage VR modules available to centers.</p>
              </div>
              <div class="section-actions">
                <div class="view-switch" data-view-switch="modules">
                  <button type="button" class="active" data-view="card">Cards</button>
                  <button type="button" data-view="table">Table</button>
                </div>
                <button class="primary with-icon" id="btnAddModule">
                  <span class="icon">+</span>
                  <span class="label">Add Module</span>
                </button>
              </div>
            </div>

            <div class="modules-grid" id="modulesGrid">
              <!-- Module cards -->
            </div>

            <div class="table-wrapper" id="modulesTableWrap" style="display:none;"></div>

            <div class="empty-state" id="modulesEmpty" style="display:none;">
              <div class="empty-title">No VR modules yet</div>
              <div>Modules are training experiences assignable to centers. Add one to start distributing content.</div>
              <div class="empty-actions">
                <button class="ghost small" id="modulesEmptyAdd">Add Module</button>
              </div>
            </div>
          </div>
        </section>

        <!-- ===== QUESTIONS SECTION ===== -->
        <section id="section-questions" class="section">
          <div class="card full">
            <div class="section-header">
              <div>
                <h2>Assessment Questions</h2>
                <p class="hint">Question bank used in child assessments.</p>
              </div>
              <button class="primary with-icon" id="btnAddQuestion">
                <span class="icon">+</span>
                <span class="label">Add Question</span>
              </button>
            </div>

            <div class="stacked-list" id="questionsList">
              <!-- Questions list -->
            </div>

            <div class="empty-state" id="questionsEmpty" style="display:none;">
              <div class="empty-title">No assessment questions</div>
              <div>Questions power child assessments. Add prompts to build your question bank.</div>
              <div class="empty-actions">
                <button class="ghost small" id="questionsEmptyAdd">Add Question</button>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- ========= MODALS ========= -->

  <!-- Center Modal -->
  <div class="modal-backdrop" id="centerModal">
    <div class="modal">
      <div class="modal-header">
        <div>
          <h2 id="centerModalTitle">Add Center</h2>
          <p class="modal-subtitle">Create or update a center profile.</p>
        </div>
        <button class="icon-button" data-close-modal="centerModal">x</button>
      </div>
      <div class="form-panel">
        <input type="hidden" id="centerId" />
        <input type="hidden" id="centerPhotoInput" />
        <div class="photo-input">
          <div class="avatar preview avatar-static" id="centerPhotoPreview"></div>
          <div class="input-group">
            <label for="centerPhotoFile">Photo</label>
            <input id="centerPhotoFile" type="file" accept="image/*" />
            <p class="hint">Upload a center photo (optional).</p>
          </div>
        </div>
        <div class="input-group">
          <label for="centerNameInput">Name</label>
          <input id="centerNameInput" type="text" placeholder="Center name" />
        </div>
        <div class="input-group">
          <label for="centerUsernameInput">Username</label>
          <input id="centerUsernameInput" type="text" placeholder="Login username" />
        </div>
        <div class="input-group">
          <label for="centerPasswordInput">Password</label>
          <input id="centerPasswordInput" type="password" placeholder="Login password" />
        </div>
        <div class="input-group">
          <label for="centerDescInput">Description</label>
          <textarea id="centerDescInput" rows="3" placeholder="Short description"></textarea>
        </div>
      </div>
      <div class="modal-actions">
        <button class="ghost" data-close-modal="centerModal">Cancel</button>
        <button class="primary" id="centerSaveBtn">Save Center</button>
      </div>
    </div>
  </div>

  <!-- Specialist Modal -->
  <div class="modal-backdrop" id="specialistModal">
    <div class="modal">
      <div class="modal-header">
        <div>
          <h2 id="specialistModalTitle">Add Specialist</h2>
          <p class="modal-subtitle">Create or update a specialist profile.</p>
        </div>
        <button class="icon-button" data-close-modal="specialistModal">x</button>
      </div>
      <div class="form-panel">
        <input type="hidden" id="specId" />
        <input type="hidden" id="specPhotoInput" />
        <div class="photo-input">
          <div class="avatar preview avatar-static" id="specPhotoPreview"></div>
          <div class="input-group">
            <label for="specPhotoFile">Photo</label>
            <input id="specPhotoFile" type="file" accept="image/*" />
            <p class="hint">Upload a profile photo (optional).</p>
          </div>
        </div>
        <div class="input-group">
          <label for="specNameInput">Name</label>
          <input id="specNameInput" type="text" placeholder="Specialist name" />
        </div>
        <div class="input-group">
          <label for="specUsernameInput">Username</label>
          <input id="specUsernameInput" type="text" placeholder="Login username" />
        </div>
        <div class="input-group">
          <label for="specPasswordInput">Password</label>
          <input id="specPasswordInput" type="password" placeholder="Login password" />
        </div>
        <div class="input-group">
          <label for="specTypeInput">Type</label>
          <select id="specTypeInput">
            <option value="freelance">Freelance</option>
            <option value="center">Linked to center</option>
          </select>
        </div>
        <div class="input-group">
          <label for="specCenterIdInput">Center ID (if linked)</label>
          <input id="specCenterIdInput" type="text" placeholder="Center ID" />
        </div>
        <div class="input-group">
          <label for="specDescInput">Description</label>
          <textarea id="specDescInput" rows="3" placeholder="Specialist description"></textarea>
        </div>
      </div>
      <div class="modal-actions">
        <button class="ghost" data-close-modal="specialistModal">Cancel</button>
        <button class="primary" id="specialistSaveBtn">Save Specialist</button>
      </div>
    </div>
  </div>

  <!-- Module Modal -->
  <div class="modal-backdrop" id="moduleModal">
    <div class="modal">
      <div class="modal-header">
        <div>
          <h2 id="moduleModalTitle">Add Module</h2>
          <p class="modal-subtitle">Create or update a VR module.</p>
        </div>
        <button class="icon-button" data-close-modal="moduleModal">x</button>
      </div>
      <div class="form-panel">
        <input type="hidden" id="moduleId" />
        <div class="input-group">
          <label for="modNameInput">Name</label>
          <input id="modNameInput" type="text" placeholder="Module name" />
        </div>
        <input type="hidden" id="modulePhotoInput" />
        <div class="photo-input">
          <div class="avatar preview avatar-static" id="modulePhotoPreview"></div>
          <div class="input-group">
            <label for="modulePhotoFile">Thumbnail</label>
            <input id="modulePhotoFile" type="file" accept="image/*" />
            <p class="hint">Upload a module thumbnail (optional).</p>
          </div>
        </div>
        <div class="input-group">
          <label for="modMinutesInput">Minutes to play</label>
          <input id="modMinutesInput" type="number" min="1" placeholder="Duration (minutes)" />
        </div>
        <div class="input-group">
          <label for="modDescInput">Description</label>
          <textarea id="modDescInput" rows="3" placeholder="Short description"></textarea>
        </div>
      </div>
      <div class="modal-actions">
        <button class="ghost" data-close-modal="moduleModal">Cancel</button>
        <button class="primary" id="moduleSaveBtn">Save Module</button>
      </div>
    </div>
  </div>

  <!-- Question Modal -->
  <div class="modal-backdrop" id="questionModal">
    <div class="modal">
      <div class="modal-header">
        <div>
          <h2 id="questionModalTitle">Add Question</h2>
          <p class="modal-subtitle">Create or update an assessment question.</p>
        </div>
        <button class="icon-button" data-close-modal="questionModal">x</button>
      </div>
      <div class="form-panel">
        <input type="hidden" id="questionId" />
        <div class="input-group">
          <label for="qTextInput">Question Text</label>
          <textarea id="qTextInput" rows="3" placeholder="Write the question here"></textarea>
        </div>
        <div class="input-group">
          <label for="qCategoryInput">Category</label>
          <input id="qCategoryInput" type="text" placeholder="Optional category" />
        </div>
        <div class="input-group">
          <label for="qDifficultyInput">Difficulty</label>
          <input id="qDifficultyInput" type="text" placeholder="Optional difficulty (e.g., Easy, Medium)" />
        </div>
      </div>
      <div class="modal-actions">
        <button class="ghost" data-close-modal="questionModal">Cancel</button>
        <button class="primary" id="questionSaveBtn">Save Question</button>
      </div>
    </div>
  </div>

  <!-- Confirm Modal -->
  <div class="modal-backdrop" id="confirmModal">
    <div class="modal confirm-modal">
      <div class="modal-header">
        <div>
          <h2>Confirm action</h2>
          <p class="modal-subtitle" id="confirmMessage">Are you sure?</p>
        </div>
        <button class="icon-button" data-close-modal="confirmModal">x</button>
      </div>
      <div class="modal-actions confirm-actions">
        <button class="ghost" id="confirmCancel">Cancel</button>
        <button class="primary" id="confirmOk">Yes, proceed</button>
      </div>
    </div>
  </div>

  <!-- Account Settings Modal -->
  <div class="modal-backdrop" id="accountModal">
    <div class="modal">
      <div class="modal-header">
        <div>
          <h2>Account Settings</h2>
          <p class="modal-subtitle">Update your display name and photo.</p>
        </div>
        <button class="icon-button" data-close-modal="accountModal">x</button>
      </div>
      <div class="form-panel">
        <input type="hidden" id="accountPhotoInput" />
        <div class="photo-input">
          <div class="avatar preview avatar-static" id="accountPhotoPreview"></div>
          <div class="input-group">
            <label for="accountPhotoFile">Photo</label>
            <input id="accountPhotoFile" type="file" accept="image/*" />
            <p class="hint">Upload a profile photo (optional).</p>
          </div>
        </div>
        <div class="input-group">
          <label for="accountNameInput">Display name</label>
          <input id="accountNameInput" type="text" placeholder="Your name" />
        </div>
      </div>
      <div class="modal-actions">
        <button class="ghost" data-close-modal="accountModal">Cancel</button>
        <button class="primary" id="accountSaveBtn">Save</button>
      </div>
    </div>
  </div>

  <script src="admin.js"></script>
</body>
</html>
